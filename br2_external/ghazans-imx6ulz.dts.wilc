// SPDX-License-Identifier: (GPL-2.0 OR MIT)
//
// Copyright 2018 NXP.

/dts-v1/;

#if ((VERSION == 6) && (PATCHLEVEL >= 5)) || (VERSION > 6)
#include "nxp/imx/imx6ulz.dtsi"
#include "nxp/imx/imx6ul-14x14-evk.dtsi"
#else
#include "imx6ulz.dtsi"
#include "imx6ul-14x14-evk.dtsi"
#endif

/delete-node/ &fec1;
/delete-node/ &fec2;
/delete-node/ &can1;
/delete-node/ &can2;
/delete-node/ &lcdif;
/delete-node/ &tsc;

/ {
	model = "Ghazan's i.MX6 ULZ Demo Board";
	compatible = "fsl,imx6ulz-14x14-evk", "fsl,imx6ull", "fsl,imx6ulz";

	/delete-node/ panel;
	/delete-node/ sound-wm8960;
	spi-4 {
		status = "disabled";
	};

	soc {
		bus@2000000 {
			pwm@2080000 {
				status = "disabled";
			};
		};

		bus@2100000 {
	        	i2c@21a4000 {
                                status = "disabled";
                        };
		        i2c@21a0000 {
                                status = "disabled";
                        };
		};
	};

	mqs: mqs {
		#sound-dai-cells = <0>;
                compatible = "fsl,imx6sx-mqs";
		pinctrl-names = "default";
	        pinctrl-0 = <&pinctrl_mqs>;
        	clocks = <&clks IMX6UL_CLK_SAI1>;
	        clock-names = "mclk";
		gpr = <&gpr>;
        	status = "okay";
	};

	sound-mqs {
		compatible = "fsl,imx6ul-ddr3-arm2-mqs",
				"fsl,imx-audio-mqs";
		model = "mqs-audio";
		cpu-dai = <&sai1>;
		audio-cpu = <&sai1>;
		asrc-controller = <&asrc>;
		audio-asrc = <&asrc>;
		audio-codec = <&mqs>;
	};

	usdhc2_pwrseq: usdhc2_pwrseq {
/*                compatible = "mmc-pwrseq-wilc1000";  used by mchp driver */
                compatible = "mmc-pwrseq-sd8787";  /* used by upstream driver */
                pinctrl-names = "default";
                pinctrl-0 = <&pinctrl_wifi_pwr>;
                reset-gpios = <&gpio3 14 GPIO_ACTIVE_HIGH>;
		powerdown-gpios = <&gpio3 4 GPIO_ACTIVE_HIGH>;
		status = "okay";
        };

/*      This block is not needed for either driver type. Replaced by block under usdhc2/slot@1
	wilc1000: wilc_wlan {
		compatible = "microchip,wilc1000", "microchip,wilc3000";
		sd-uhs-sdr12;
		bus-width = <4>;
		reg = <0x01>;
		sdhci-host = <&usdhc2>;
		interrupt = <&gpio3 6 GPIO_ACTIVE_LOW>;
		fw_path = "/lib/firmware/atmel/wilc1000_wifi_firmware.bin";
		pwr-retry-cnt = <3>;
		status = "okay";
	};
*/
};



&usdhc1 {
        compatible = "fsl,imx6ull-usdhc", "fsl,imx6sx-usdhc";
	/delete-property/ cd-gpios;
	non-removable;
	bus-width = <4>;
	no-1-8-v;
};

&usdhc2 {
        compatible = "fsl,imx6ull-usdhc", "fsl,imx6sx-usdhc";
	pinctrl-names = "default";
	pinctrl-0 = <&pinctrl_wilc>;
	/delete-property/ cd-gpios;
	broken-cd;
	no-1-8-v;
	bus-width = <4>;
	keep-power-in-suspend;
	mmc-pwrseq = <&usdhc2_pwrseq>;
	wifi: slot@1 {
		compatible = "microchip,wilc1000", "microchip,wilc3000", "atmel,wilc_sdio";
		reg = <1>;
		bus-width = <4>;
/*		irq-gpios = <&gpio3 6 GPIO_ACTIVE_HIGH>;    These 3 lines are not needed for either driver type */
/*		interrupt-parent = <&gpio3>;     */
/*		interrupts = <6 0>;              */  
		status = "okay";
	};
};

&usbotg1 {
        dr_mode = "peripheral";
	pinctrl-0 = <>;
/*        srp-disable;
        hnp-disable;
        adp-disable; */
        status = "okay";
};

/*
&qspi {
	status = "okay";
	cs-gpios = <&gpio1 9 GPIO_ACTIVE_LOW>;
	flash@0 {
		reg = <0>;
		compatible = "jedec,spi-nor";
	};
};
*/

&uart2 {
        status = "okay";
};

&uart3 {
        status = "okay";
};


&sai1 {
        pinctrl-0 = <>;
	assigned-clocks = <&clks IMX6UL_CLK_SAI1_SEL>,
		<&clks IMX6UL_CLK_PLL4_AUDIO_DIV>,
			<&clks IMX6UL_CLK_SAI1>;
	assigned-clock-parents = <&clks IMX6UL_CLK_PLL4_AUDIO_DIV>;
	assigned-clock-rates = <0>, <786432000>, <12288000>;
	fsl,sai-mclk-direction-output;
        status = "okay";
};

&sai2 {
        pinctrl-0 = <>;
        status = "disabled";
};

&wdog1 {
	/delete-property/ pinctrl-names;
	/delete-property/ pinctrl-0;
};

&iomuxc {

	pinctrl_mqs: mqsgrp {
        	fsl,pins = <
		        MX6UL_PAD_GPIO1_IO00__MQS_RIGHT 0x120b0
		        MX6UL_PAD_GPIO1_IO01__MQS_LEFT  0x120b0
	        >;
        };

	pinctrl_wilc: wilcgrp {
                fsl,pins = <
			MX6UL_PAD_CSI_VSYNC__USDHC2_CLK    0x10059
			MX6UL_PAD_CSI_HSYNC__USDHC2_CMD    0x17059
			MX6UL_PAD_CSI_DATA00__USDHC2_DATA0 0x17059
			MX6UL_PAD_CSI_DATA01__USDHC2_DATA1 0x17059
			MX6UL_PAD_CSI_DATA02__USDHC2_DATA2 0x17059
			MX6UL_PAD_CSI_DATA03__USDHC2_DATA3 0x17059
			MX6UL_PAD_LCD_DATA01__GPIO3_IO06   0x130a1 /* Commented out for mchp driver, include for upstream driver */
		>;
	};

	pinctrl_wifi_pwr: wifipwrgrp {
                fsl,pins = <
                        MX6UL_PAD_LCD_DATA09__GPIO3_IO14 0x13059 /* RESET */
			MX6UL_PAD_LCD_RESET__GPIO3_IO04    0x13059 /* CHIP_EN, pulldown on start */
                >;
        };



};
